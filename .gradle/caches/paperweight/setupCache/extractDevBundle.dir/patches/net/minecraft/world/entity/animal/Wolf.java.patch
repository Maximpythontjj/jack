--- a/net/minecraft/world/entity/animal/Wolf.java
+++ b/net/minecraft/world/entity/animal/Wolf.java
@@ -1,5 +1,6 @@
 package net.minecraft.world.entity.animal;
 
+import java.util.Objects;
 import java.util.Optional;
 import java.util.UUID;
 import javax.annotation.Nullable;
@@ -84,20 +85,28 @@
 import net.minecraft.world.level.gameevent.GameEvent;
 import net.minecraft.world.level.pathfinder.PathType;
 import net.minecraft.world.phys.Vec3;
+// CraftBukkit start
+import org.bukkit.event.entity.EntityDamageEvent;
+import org.bukkit.event.entity.EntityRegainHealthEvent;
+import org.bukkit.event.entity.EntityTargetEvent;
+import org.bukkit.craftbukkit.event.CraftEventFactory;
+// CraftBukkit end
 
 public class Wolf extends TamableAnimal implements NeutralMob, VariantHolder<Holder<WolfVariant>> {
+
     private static final EntityDataAccessor<Boolean> DATA_INTERESTED_ID = SynchedEntityData.defineId(Wolf.class, EntityDataSerializers.BOOLEAN);
     private static final EntityDataAccessor<Integer> DATA_COLLAR_COLOR = SynchedEntityData.defineId(Wolf.class, EntityDataSerializers.INT);
     private static final EntityDataAccessor<Integer> DATA_REMAINING_ANGER_TIME = SynchedEntityData.defineId(Wolf.class, EntityDataSerializers.INT);
     private static final EntityDataAccessor<Holder<WolfVariant>> DATA_VARIANT_ID = SynchedEntityData.defineId(Wolf.class, EntityDataSerializers.WOLF_VARIANT);
-    public static final TargetingConditions.Selector PREY_SELECTOR = (entity, serverLevel) -> {
-        EntityType<?> entityType = entity.getType();
-        return entityType == EntityType.SHEEP || entityType == EntityType.RABBIT || entityType == EntityType.FOX;
+    public static final TargetingConditions.Selector PREY_SELECTOR = (entityliving, worldserver) -> {
+        EntityType<?> entitytypes = entityliving.getType();
+
+        return entitytypes == EntityType.SHEEP || entitytypes == EntityType.RABBIT || entitytypes == EntityType.FOX;
     };
     private static final float START_HEALTH = 8.0F;
     private static final float TAME_HEALTH = 40.0F;
     private static final float ARMOR_REPAIR_UNIT = 0.125F;
-    public static final float DEFAULT_TAIL_ANGLE = (float) (Math.PI / 5);
+    public static final float DEFAULT_TAIL_ANGLE = 0.62831855F;
     private float interestedAngle;
     private float interestedAngleO;
     public boolean isWet;
@@ -118,59 +127,59 @@
     @Override
     protected void registerGoals() {
         this.goalSelector.addGoal(1, new FloatGoal(this));
-        this.goalSelector.addGoal(1, new TamableAnimal.TamableAnimalPanicGoal(1.5, DamageTypeTags.PANIC_ENVIRONMENTAL_CAUSES));
+        this.goalSelector.addGoal(1, new TamableAnimal.TamableAnimalPanicGoal(1.5D, DamageTypeTags.PANIC_ENVIRONMENTAL_CAUSES));
         this.goalSelector.addGoal(2, new SitWhenOrderedToGoal(this));
-        this.goalSelector.addGoal(3, new Wolf.WolfAvoidEntityGoal<>(this, Llama.class, 24.0F, 1.5, 1.5));
+        this.goalSelector.addGoal(3, new Wolf.WolfAvoidEntityGoal<>(this, Llama.class, 24.0F, 1.5D, 1.5D));
         this.goalSelector.addGoal(4, new LeapAtTargetGoal(this, 0.4F));
-        this.goalSelector.addGoal(5, new MeleeAttackGoal(this, 1.0, true));
-        this.goalSelector.addGoal(6, new FollowOwnerGoal(this, 1.0, 10.0F, 2.0F));
-        this.goalSelector.addGoal(7, new BreedGoal(this, 1.0));
-        this.goalSelector.addGoal(8, new WaterAvoidingRandomStrollGoal(this, 1.0));
+        this.goalSelector.addGoal(5, new MeleeAttackGoal(this, 1.0D, true));
+        this.goalSelector.addGoal(6, new FollowOwnerGoal(this, 1.0D, 10.0F, 2.0F));
+        this.goalSelector.addGoal(7, new BreedGoal(this, 1.0D));
+        this.goalSelector.addGoal(8, new WaterAvoidingRandomStrollGoal(this, 1.0D));
         this.goalSelector.addGoal(9, new BegGoal(this, 8.0F));
         this.goalSelector.addGoal(10, new LookAtPlayerGoal(this, Player.class, 8.0F));
         this.goalSelector.addGoal(10, new RandomLookAroundGoal(this));
         this.targetSelector.addGoal(1, new OwnerHurtByTargetGoal(this));
         this.targetSelector.addGoal(2, new OwnerHurtTargetGoal(this));
-        this.targetSelector.addGoal(3, new HurtByTargetGoal(this).setAlertOthers());
+        this.targetSelector.addGoal(3, (new HurtByTargetGoal(this, new Class[0])).setAlertOthers());
         this.targetSelector.addGoal(4, new NearestAttackableTargetGoal<>(this, Player.class, 10, true, false, this::isAngryAt));
-        this.targetSelector.addGoal(5, new NonTameRandomTargetGoal<>(this, Animal.class, false, PREY_SELECTOR));
+        this.targetSelector.addGoal(5, new NonTameRandomTargetGoal<>(this, Animal.class, false, Wolf.PREY_SELECTOR));
         this.targetSelector.addGoal(6, new NonTameRandomTargetGoal<>(this, Turtle.class, false, Turtle.BABY_ON_LAND_SELECTOR));
         this.targetSelector.addGoal(7, new NearestAttackableTargetGoal<>(this, AbstractSkeleton.class, false));
         this.targetSelector.addGoal(8, new ResetUniversalAngerTargetGoal<>(this, true));
     }
 
     public ResourceLocation getTexture() {
-        WolfVariant wolfVariant = this.getVariant().value();
-        if (this.isTame()) {
-            return wolfVariant.tameTexture();
-        } else {
-            return this.isAngry() ? wolfVariant.angryTexture() : wolfVariant.wildTexture();
-        }
+        WolfVariant wolfvariant = (WolfVariant) this.getVariant().value();
+
+        return this.isTame() ? wolfvariant.tameTexture() : (this.isAngry() ? wolfvariant.angryTexture() : wolfvariant.wildTexture());
     }
 
     @Override
     public Holder<WolfVariant> getVariant() {
-        return this.entityData.get(DATA_VARIANT_ID);
+        return (Holder) this.entityData.get(Wolf.DATA_VARIANT_ID);
     }
 
-    @Override
     public void setVariant(Holder<WolfVariant> holder) {
-        this.entityData.set(DATA_VARIANT_ID, holder);
+        this.entityData.set(Wolf.DATA_VARIANT_ID, holder);
     }
 
     public static AttributeSupplier.Builder createAttributes() {
-        return Animal.createAnimalAttributes().add(Attributes.MOVEMENT_SPEED, 0.3F).add(Attributes.MAX_HEALTH, 8.0).add(Attributes.ATTACK_DAMAGE, 4.0);
+        return Animal.createAnimalAttributes().add(Attributes.MOVEMENT_SPEED, 0.30000001192092896D).add(Attributes.MAX_HEALTH, 8.0D).add(Attributes.ATTACK_DAMAGE, 4.0D);
     }
 
     @Override
     protected void defineSynchedData(SynchedEntityData.Builder builder) {
         super.defineSynchedData(builder);
-        RegistryAccess registryAccess = this.registryAccess();
-        Registry<WolfVariant> registry = registryAccess.lookupOrThrow(Registries.WOLF_VARIANT);
-        builder.define(DATA_VARIANT_ID, registry.get(WolfVariants.DEFAULT).or(registry::getAny).orElseThrow());
-        builder.define(DATA_INTERESTED_ID, false);
-        builder.define(DATA_COLLAR_COLOR, DyeColor.RED.getId());
-        builder.define(DATA_REMAINING_ANGER_TIME, 0);
+        RegistryAccess iregistrycustom = this.registryAccess();
+        Registry<WolfVariant> iregistry = iregistrycustom.lookupOrThrow(Registries.WOLF_VARIANT);
+        EntityDataAccessor datawatcherobject = Wolf.DATA_VARIANT_ID;
+        Optional optional = iregistry.get(WolfVariants.DEFAULT);
+
+        Objects.requireNonNull(iregistry);
+        builder.define(datawatcherobject, (Holder) optional.or(iregistry::getAny).orElseThrow());
+        builder.define(Wolf.DATA_INTERESTED_ID, false);
+        builder.define(Wolf.DATA_COLLAR_COLOR, DyeColor.RED.getId());
+        builder.define(Wolf.DATA_REMAINING_ANGER_TIME, 0);
     }
 
     @Override
@@ -181,18 +190,21 @@
     @Override
     public void addAdditionalSaveData(CompoundTag nbt) {
         super.addAdditionalSaveData(nbt);
-        nbt.putByte("CollarColor", (byte)this.getCollarColor().getId());
-        this.getVariant().unwrapKey().ifPresent(resourceKey -> nbt.putString("variant", resourceKey.location().toString()));
+        nbt.putByte("CollarColor", (byte) this.getCollarColor().getId());
+        this.getVariant().unwrapKey().ifPresent((resourcekey) -> {
+            nbt.putString("variant", resourcekey.location().toString());
+        });
         this.addPersistentAngerSaveData(nbt);
     }
 
     @Override
     public void readAdditionalSaveData(CompoundTag nbt) {
         super.readAdditionalSaveData(nbt);
-        Optional.ofNullable(ResourceLocation.tryParse(nbt.getString("variant")))
-            .map(variantId -> ResourceKey.create(Registries.WOLF_VARIANT, variantId))
-            .flatMap(variantKey -> this.registryAccess().lookupOrThrow(Registries.WOLF_VARIANT).get((ResourceKey<WolfVariant>)variantKey))
-            .ifPresent(this::setVariant);
+        Optional.ofNullable(ResourceLocation.tryParse(nbt.getString("variant"))).map((minecraftkey) -> {
+            return ResourceKey.create(Registries.WOLF_VARIANT, minecraftkey);
+        }).flatMap((resourcekey) -> {
+            return this.registryAccess().lookupOrThrow(Registries.WOLF_VARIANT).get(resourcekey);
+        }).ifPresent(this::setVariant);
         if (nbt.contains("CollarColor", 99)) {
             this.setCollarColor(DyeColor.byId(nbt.getInt("CollarColor")));
         }
@@ -202,31 +214,24 @@
 
     @Nullable
     @Override
-    public SpawnGroupData finalizeSpawn(
-        ServerLevelAccessor world, DifficultyInstance difficulty, EntitySpawnReason spawnReason, @Nullable SpawnGroupData entityData
-    ) {
+    public SpawnGroupData finalizeSpawn(ServerLevelAccessor world, DifficultyInstance difficulty, EntitySpawnReason spawnReason, @Nullable SpawnGroupData entityData) {
         Holder<Biome> holder = world.getBiome(this.blockPosition());
-        Holder<WolfVariant> holder2;
-        if (entityData instanceof Wolf.WolfPackData wolfPackData) {
-            holder2 = wolfPackData.type;
+        Holder holder1;
+
+        if (entityData instanceof Wolf.WolfPackData entitywolf_b) {
+            holder1 = entitywolf_b.type;
         } else {
-            holder2 = WolfVariants.getSpawnVariant(this.registryAccess(), holder);
-            entityData = new Wolf.WolfPackData(holder2);
+            holder1 = WolfVariants.getSpawnVariant(this.registryAccess(), holder);
+            entityData = new Wolf.WolfPackData(holder1);
         }
 
-        this.setVariant(holder2);
-        return super.finalizeSpawn(world, difficulty, spawnReason, entityData);
+        this.setVariant(holder1);
+        return super.finalizeSpawn(world, difficulty, spawnReason, (SpawnGroupData) entityData);
     }
 
     @Override
     protected SoundEvent getAmbientSound() {
-        if (this.isAngry()) {
-            return SoundEvents.WOLF_GROWL;
-        } else if (this.random.nextInt(3) == 0) {
-            return this.isTame() && this.getHealth() < 20.0F ? SoundEvents.WOLF_WHINE : SoundEvents.WOLF_PANT;
-        } else {
-            return SoundEvents.WOLF_AMBIENT;
-        }
+        return this.isAngry() ? SoundEvents.WOLF_GROWL : (this.random.nextInt(3) == 0 ? (this.isTame() && this.getHealth() < 20.0F ? SoundEvents.WOLF_WHINE : SoundEvents.WOLF_PANT) : SoundEvents.WOLF_AMBIENT);
     }
 
     @Override
@@ -251,12 +256,13 @@
             this.isShaking = true;
             this.shakeAnim = 0.0F;
             this.shakeAnimO = 0.0F;
-            this.level().broadcastEntityEvent(this, (byte)8);
+            this.level().broadcastEntityEvent(this, (byte) 8);
         }
 
         if (!this.level().isClientSide) {
-            this.updatePersistentAnger((ServerLevel)this.level(), true);
+            this.updatePersistentAnger((ServerLevel) this.level(), true);
         }
+
     }
 
     @Override
@@ -265,15 +271,15 @@
         if (this.isAlive()) {
             this.interestedAngleO = this.interestedAngle;
             if (this.isInterested()) {
-                this.interestedAngle = this.interestedAngle + (1.0F - this.interestedAngle) * 0.4F;
+                this.interestedAngle += (1.0F - this.interestedAngle) * 0.4F;
             } else {
-                this.interestedAngle = this.interestedAngle + (0.0F - this.interestedAngle) * 0.4F;
+                this.interestedAngle += (0.0F - this.interestedAngle) * 0.4F;
             }
 
             if (this.isInWaterRainOrBubble()) {
                 this.isWet = true;
                 if (this.isShaking && !this.level().isClientSide) {
-                    this.level().broadcastEntityEvent(this, (byte)56);
+                    this.level().broadcastEntityEvent(this, (byte) 56);
                     this.cancelShake();
                 }
             } else if ((this.isWet || this.isShaking) && this.isShaking) {
@@ -292,18 +298,19 @@
                 }
 
                 if (this.shakeAnim > 0.4F) {
-                    float f = (float)this.getY();
-                    int i = (int)(Mth.sin((this.shakeAnim - 0.4F) * (float) Math.PI) * 7.0F);
-                    Vec3 vec3 = this.getDeltaMovement();
+                    float f = (float) this.getY();
+                    int i = (int) (Mth.sin((this.shakeAnim - 0.4F) * 3.1415927F) * 7.0F);
+                    Vec3 vec3d = this.getDeltaMovement();
 
-                    for (int j = 0; j < i; j++) {
-                        float g = (this.random.nextFloat() * 2.0F - 1.0F) * this.getBbWidth() * 0.5F;
-                        float h = (this.random.nextFloat() * 2.0F - 1.0F) * this.getBbWidth() * 0.5F;
-                        this.level()
-                            .addParticle(ParticleTypes.SPLASH, this.getX() + (double)g, (double)(f + 0.8F), this.getZ() + (double)h, vec3.x, vec3.y, vec3.z);
+                    for (int j = 0; j < i; ++j) {
+                        float f1 = (this.random.nextFloat() * 2.0F - 1.0F) * this.getBbWidth() * 0.5F;
+                        float f2 = (this.random.nextFloat() * 2.0F - 1.0F) * this.getBbWidth() * 0.5F;
+
+                        this.level().addParticle(ParticleTypes.SPLASH, this.getX() + (double) f1, (double) (f + 0.8F), this.getZ() + (double) f2, vec3d.x, vec3d.y, vec3d.z);
                     }
                 }
             }
+
         }
     }
 
@@ -331,7 +338,7 @@
     }
 
     public float getHeadRollAngle(float tickDelta) {
-        return Mth.lerp(tickDelta, this.interestedAngleO, this.interestedAngle) * 0.15F * (float) Math.PI;
+        return Mth.lerp(tickDelta, this.interestedAngleO, this.interestedAngle) * 0.15F * 3.1415927F;
     }
 
     @Override
@@ -344,8 +351,14 @@
         if (this.isInvulnerableTo(world, source)) {
             return false;
         } else {
+            // CraftBukkit start
+            boolean result = super.hurtServer(world, source, amount);
+            if (!result) {
+                return result;
+            }
+            // CraftBukkit end
             this.setOrderedToSit(false);
-            return super.hurtServer(world, source, amount);
+            return result; // CraftBukkit
         }
     }
 
@@ -355,29 +368,27 @@
     }
 
     @Override
-    protected void actuallyHurt(ServerLevel world, DamageSource source, float amount) {
-        if (!this.canArmorAbsorb(source)) {
-            super.actuallyHurt(world, source, amount);
+    public boolean actuallyHurt(ServerLevel worldserver, DamageSource damagesource, float f, EntityDamageEvent event) { // CraftBukkit - void -> boolean
+        if (!this.canArmorAbsorb(damagesource)) {
+            return super.actuallyHurt(worldserver, damagesource, f, event); // CraftBukkit
         } else {
-            ItemStack itemStack = this.getBodyArmorItem();
-            int i = itemStack.getDamageValue();
-            int j = itemStack.getMaxDamage();
-            itemStack.hurtAndBreak(Mth.ceil(amount), this, EquipmentSlot.BODY);
+            // CraftBukkit start - SPIGOT-7815: if the damage was cancelled, no need to run the wolf armor behaviour
+            if (event.isCancelled()) {
+                return false;
+            }
+            // CraftBukkit end
+            ItemStack itemstack = this.getBodyArmorItem();
+            int i = itemstack.getDamageValue();
+            int j = itemstack.getMaxDamage();
+
+            itemstack.hurtAndBreak(Mth.ceil(f), this, EquipmentSlot.BODY);
             if (Crackiness.WOLF_ARMOR.byDamage(i, j) != Crackiness.WOLF_ARMOR.byDamage(this.getBodyArmorItem())) {
                 this.playSound(SoundEvents.WOLF_ARMOR_CRACK);
-                world.sendParticles(
-                    new ItemParticleOption(ParticleTypes.ITEM, Items.ARMADILLO_SCUTE.getDefaultInstance()),
-                    this.getX(),
-                    this.getY() + 1.0,
-                    this.getZ(),
-                    20,
-                    0.2,
-                    0.1,
-                    0.2,
-                    0.1
-                );
+                worldserver.sendParticles(new ItemParticleOption(ParticleTypes.ITEM, Items.ARMADILLO_SCUTE.getDefaultInstance()), this.getX(), this.getY() + 1.0D, this.getZ(), 20, 0.2D, 0.1D, 0.2D, 0.1D);
             }
+
         }
+        return true; // CraftBukkit // Paper - return false ONLY if event was cancelled
     }
 
     private boolean canArmorAbsorb(DamageSource source) {
@@ -387,11 +398,12 @@
     @Override
     protected void applyTamingSideEffects() {
         if (this.isTame()) {
-            this.getAttribute(Attributes.MAX_HEALTH).setBaseValue(40.0);
-            this.setHealth(40.0F);
+            this.getAttribute(Attributes.MAX_HEALTH).setBaseValue(40.0D);
+            this.setHealth(this.getMaxHealth()); // CraftBukkit - 40.0 -> getMaxHealth()
         } else {
-            this.getAttribute(Attributes.MAX_HEALTH).setBaseValue(8.0);
+            this.getAttribute(Attributes.MAX_HEALTH).setBaseValue(8.0D);
         }
+
     }
 
     @Override
@@ -401,70 +413,90 @@
 
     @Override
     public InteractionResult mobInteract(Player player, InteractionHand hand) {
-        ItemStack itemStack = player.getItemInHand(hand);
-        Item item = itemStack.getItem();
+        ItemStack itemstack = player.getItemInHand(hand);
+        Item item = itemstack.getItem();
+
         if (this.isTame()) {
-            if (this.isFood(itemStack) && this.getHealth() < this.getMaxHealth()) {
-                this.usePlayerItem(player, hand, itemStack);
-                FoodProperties foodProperties = itemStack.get(DataComponents.FOOD);
-                float f = foodProperties != null ? (float)foodProperties.nutrition() : 1.0F;
-                this.heal(2.0F * f);
+            if (this.isFood(itemstack) && this.getHealth() < this.getMaxHealth()) {
+                this.usePlayerItem(player, hand, itemstack);
+                FoodProperties foodinfo = (FoodProperties) itemstack.get(DataComponents.FOOD);
+                float f = foodinfo != null ? (float) foodinfo.nutrition() : 1.0F;
+
+                this.heal(2.0F * f, EntityRegainHealthEvent.RegainReason.EATING); // CraftBukkit
                 return InteractionResult.SUCCESS;
             } else {
-                if (item instanceof DyeItem dyeItem && this.isOwnedBy(player)) {
-                    DyeColor dyeColor = dyeItem.getDyeColor();
-                    if (dyeColor != this.getCollarColor()) {
-                        this.setCollarColor(dyeColor);
-                        itemStack.consume(1, player);
-                        return InteractionResult.SUCCESS;
-                    }
+                if (item instanceof DyeItem) {
+                    DyeItem itemdye = (DyeItem) item;
 
-                    return super.mobInteract(player, hand);
-                }
+                    if (this.isOwnedBy(player)) {
+                        DyeColor enumcolor = itemdye.getDyeColor();
 
-                if (this.isEquippableInSlot(itemStack, EquipmentSlot.BODY) && !this.isWearingBodyArmor() && this.isOwnedBy(player) && !this.isBaby()) {
-                    this.setBodyArmorItem(itemStack.copyWithCount(1));
-                    itemStack.consume(1, player);
-                    return InteractionResult.SUCCESS;
-                } else if (itemStack.is(Items.SHEARS)
-                    && this.isOwnedBy(player)
-                    && this.isWearingBodyArmor()
-                    && (!EnchantmentHelper.has(this.getBodyArmorItem(), EnchantmentEffectComponents.PREVENT_ARMOR_CHANGE) || player.isCreative())) {
-                    itemStack.hurtAndBreak(1, player, getSlotForHand(hand));
-                    this.playSound(SoundEvents.ARMOR_UNEQUIP_WOLF);
-                    ItemStack itemStack2 = this.getBodyArmorItem();
-                    this.setBodyArmorItem(ItemStack.EMPTY);
-                    if (this.level() instanceof ServerLevel serverLevel) {
-                        this.spawnAtLocation(serverLevel, itemStack2);
+                        if (enumcolor != this.getCollarColor()) {
+                            // Paper start - Add EntityDyeEvent and CollarColorable interface
+                            final io.papermc.paper.event.entity.EntityDyeEvent event = new io.papermc.paper.event.entity.EntityDyeEvent(this.getBukkitEntity(), org.bukkit.DyeColor.getByWoolData((byte) enumcolor.getId()), ((net.minecraft.server.level.ServerPlayer) player).getBukkitEntity());
+                            if (!event.callEvent()) {
+                                return InteractionResult.FAIL;
+                            }
+                            enumcolor = DyeColor.byId(event.getColor().getWoolData());
+                            // Paper end - Add EntityDyeEvent and CollarColorable interface
+
+                            this.setCollarColor(enumcolor);
+                            itemstack.consume(1, player);
+                            return InteractionResult.SUCCESS;
+                        }
+
+                        return super.mobInteract(player, hand);
                     }
+                }
 
-                    return InteractionResult.SUCCESS;
-                } else if (this.isInSittingPose()
-                    && this.isWearingBodyArmor()
-                    && this.isOwnedBy(player)
-                    && this.getBodyArmorItem().isDamaged()
-                    && this.getBodyArmorItem().isValidRepairItem(itemStack)) {
-                    itemStack.shrink(1);
-                    this.playSound(SoundEvents.WOLF_ARMOR_REPAIR);
-                    ItemStack itemStack3 = this.getBodyArmorItem();
-                    int i = (int)((float)itemStack3.getMaxDamage() * 0.125F);
-                    itemStack3.setDamageValue(Math.max(0, itemStack3.getDamageValue() - i));
+                if (this.isEquippableInSlot(itemstack, EquipmentSlot.BODY) && !this.isWearingBodyArmor() && this.isOwnedBy(player) && !this.isBaby()) {
+                    this.setBodyArmorItem(itemstack.copyWithCount(1));
+                    itemstack.consume(1, player);
                     return InteractionResult.SUCCESS;
                 } else {
-                    InteractionResult interactionResult = super.mobInteract(player, hand);
-                    if (!interactionResult.consumesAction() && this.isOwnedBy(player)) {
-                        this.setOrderedToSit(!this.isOrderedToSit());
-                        this.jumping = false;
-                        this.navigation.stop();
-                        this.setTarget(null);
-                        return InteractionResult.SUCCESS.withoutItem();
+                    ItemStack itemstack1;
+
+                    if (itemstack.is(Items.SHEARS) && this.isOwnedBy(player) && this.isWearingBodyArmor() && (!EnchantmentHelper.has(this.getBodyArmorItem(), EnchantmentEffectComponents.PREVENT_ARMOR_CHANGE) || player.isCreative())) {
+                        itemstack.hurtAndBreak(1, player, getSlotForHand(hand));
+                        this.playSound(SoundEvents.ARMOR_UNEQUIP_WOLF);
+                        itemstack1 = this.getBodyArmorItem();
+                        this.setBodyArmorItem(ItemStack.EMPTY);
+                        Level world = this.level();
+
+                        if (world instanceof ServerLevel) {
+                            ServerLevel worldserver = (ServerLevel) world;
+
+                            this.forceDrops = true; // CraftBukkit
+                            this.spawnAtLocation(worldserver, itemstack1);
+                            this.forceDrops = false; // CraftBukkit
+                        }
+
+                        return InteractionResult.SUCCESS;
+                    } else if (this.isInSittingPose() && this.isWearingBodyArmor() && this.isOwnedBy(player) && this.getBodyArmorItem().isDamaged() && this.getBodyArmorItem().isValidRepairItem(itemstack)) {
+                        itemstack.shrink(1);
+                        this.playSound(SoundEvents.WOLF_ARMOR_REPAIR);
+                        itemstack1 = this.getBodyArmorItem();
+                        int i = (int) ((float) itemstack1.getMaxDamage() * 0.125F);
+
+                        itemstack1.setDamageValue(Math.max(0, itemstack1.getDamageValue() - i));
+                        return InteractionResult.SUCCESS;
                     } else {
-                        return interactionResult;
+                        InteractionResult enuminteractionresult = super.mobInteract(player, hand);
+
+                        if (!enuminteractionresult.consumesAction() && this.isOwnedBy(player)) {
+                            this.setOrderedToSit(!this.isOrderedToSit());
+                            this.jumping = false;
+                            this.navigation.stop();
+                            this.setTarget((LivingEntity) null, EntityTargetEvent.TargetReason.FORGOT_TARGET, true); // CraftBukkit - reason
+                            return InteractionResult.SUCCESS.withoutItem();
+                        } else {
+                            return enuminteractionresult;
+                        }
                     }
                 }
             }
-        } else if (!this.level().isClientSide && itemStack.is(Items.BONE) && !this.isAngry()) {
-            itemStack.consume(1, player);
+        } else if (!this.level().isClientSide && itemstack.is(Items.BONE) && !this.isAngry()) {
+            itemstack.consume(1, player);
             this.tryToTame(player);
             return InteractionResult.SUCCESS_SERVER;
         } else {
@@ -473,15 +505,17 @@
     }
 
     private void tryToTame(Player player) {
-        if (this.random.nextInt(3) == 0) {
+        // CraftBukkit - added event call and isCancelled check.
+        if (this.random.nextInt(3) == 0 && !CraftEventFactory.callEntityTameEvent(this, player).isCancelled()) {
             this.tame(player);
             this.navigation.stop();
-            this.setTarget(null);
+            this.setTarget((LivingEntity) null);
             this.setOrderedToSit(true);
-            this.level().broadcastEntityEvent(this, (byte)7);
+            this.level().broadcastEntityEvent(this, (byte) 7);
         } else {
-            this.level().broadcastEntityEvent(this, (byte)6);
+            this.level().broadcastEntityEvent(this, (byte) 6);
         }
+
     }
 
     @Override
@@ -495,6 +529,7 @@
         } else {
             super.handleEntityEvent(status);
         }
+
     }
 
     public float getTailAngle() {
@@ -502,10 +537,11 @@
             return 1.5393804F;
         } else if (this.isTame()) {
             float f = this.getMaxHealth();
-            float g = (f - this.getHealth()) / f;
-            return (0.55F - g * 0.4F) * (float) Math.PI;
+            float f1 = (f - this.getHealth()) / f;
+
+            return (0.55F - f1 * 0.4F) * 3.1415927F;
         } else {
-            return (float) (Math.PI / 5);
+            return 0.62831855F;
         }
     }
 
@@ -521,17 +557,17 @@
 
     @Override
     public int getRemainingPersistentAngerTime() {
-        return this.entityData.get(DATA_REMAINING_ANGER_TIME);
+        return (Integer) this.entityData.get(Wolf.DATA_REMAINING_ANGER_TIME);
     }
 
     @Override
     public void setRemainingPersistentAngerTime(int angerTime) {
-        this.entityData.set(DATA_REMAINING_ANGER_TIME, angerTime);
+        this.entityData.set(Wolf.DATA_REMAINING_ANGER_TIME, angerTime);
     }
 
     @Override
     public void startPersistentAngerTimer() {
-        this.setRemainingPersistentAngerTime(PERSISTENT_ANGER_TIME.sample(this.random));
+        this.setRemainingPersistentAngerTime(Wolf.PERSISTENT_ANGER_TIME.sample(this.random));
     }
 
     @Nullable
@@ -546,71 +582,106 @@
     }
 
     public DyeColor getCollarColor() {
-        return DyeColor.byId(this.entityData.get(DATA_COLLAR_COLOR));
+        return DyeColor.byId((Integer) this.entityData.get(Wolf.DATA_COLLAR_COLOR));
     }
 
     public void setCollarColor(DyeColor color) {
-        this.entityData.set(DATA_COLLAR_COLOR, color.getId());
+        this.entityData.set(Wolf.DATA_COLLAR_COLOR, color.getId());
     }
 
     @Nullable
     @Override
-    public Wolf getBreedOffspring(ServerLevel serverLevel, AgeableMob ageableMob) {
-        Wolf wolf = EntityType.WOLF.create(serverLevel, EntitySpawnReason.BREEDING);
-        if (wolf != null && ageableMob instanceof Wolf wolf2) {
+    public Wolf getBreedOffspring(ServerLevel world, AgeableMob entity) {
+        Wolf entitywolf = (Wolf) EntityType.WOLF.create(world, EntitySpawnReason.BREEDING);
+
+        if (entitywolf != null && entity instanceof Wolf entitywolf1) {
             if (this.random.nextBoolean()) {
-                wolf.setVariant(this.getVariant());
+                entitywolf.setVariant(this.getVariant());
             } else {
-                wolf.setVariant(wolf2.getVariant());
+                entitywolf.setVariant(entitywolf1.getVariant());
             }
 
             if (this.isTame()) {
-                wolf.setOwnerUUID(this.getOwnerUUID());
-                wolf.setTame(true, true);
+                entitywolf.setOwnerUUID(this.getOwnerUUID());
+                entitywolf.setTame(true, true);
                 if (this.random.nextBoolean()) {
-                    wolf.setCollarColor(this.getCollarColor());
+                    entitywolf.setCollarColor(this.getCollarColor());
                 } else {
-                    wolf.setCollarColor(wolf2.getCollarColor());
+                    entitywolf.setCollarColor(entitywolf1.getCollarColor());
                 }
             }
         }
 
-        return wolf;
+        return entitywolf;
     }
 
     public void setIsInterested(boolean begging) {
-        this.entityData.set(DATA_INTERESTED_ID, begging);
+        this.entityData.set(Wolf.DATA_INTERESTED_ID, begging);
     }
 
     @Override
     public boolean canMate(Animal other) {
-        return other != this && this.isTame() && other instanceof Wolf wolf && wolf.isTame() && !wolf.isInSittingPose() && this.isInLove() && wolf.isInLove();
+        if (other == this) {
+            return false;
+        } else if (!this.isTame()) {
+            return false;
+        } else if (!(other instanceof Wolf)) {
+            return false;
+        } else {
+            Wolf entitywolf = (Wolf) other;
+
+            return !entitywolf.isTame() ? false : (entitywolf.isInSittingPose() ? false : this.isInLove() && entitywolf.isInLove());
+        }
     }
 
     public boolean isInterested() {
-        return this.entityData.get(DATA_INTERESTED_ID);
+        return (Boolean) this.entityData.get(Wolf.DATA_INTERESTED_ID);
     }
 
     @Override
     public boolean wantsToAttack(LivingEntity target, LivingEntity owner) {
-        if (target instanceof Creeper || target instanceof Ghast || target instanceof ArmorStand) {
-            return false;
-        } else if (target instanceof Wolf wolf) {
-            return !wolf.isTame() || wolf.getOwner() != owner;
-        } else {
-            if (target instanceof Player player && owner instanceof Player player2 && !player2.canHarmPlayer(player)) {
-                return false;
-            }
+        if (!(target instanceof Creeper) && !(target instanceof Ghast) && !(target instanceof ArmorStand)) {
+            if (target instanceof Wolf) {
+                Wolf entitywolf = (Wolf) target;
 
-            if (target instanceof AbstractHorse abstractHorse && abstractHorse.isTamed()) {
-                return false;
-            }
+                return !entitywolf.isTame() || entitywolf.getOwner() != owner;
+            } else {
+                if (target instanceof Player) {
+                    Player entityhuman = (Player) target;
 
-            if (target instanceof TamableAnimal tamableAnimal && tamableAnimal.isTame()) {
-                return false;
-            }
+                    if (owner instanceof Player) {
+                        Player entityhuman1 = (Player) owner;
 
-            return true;
+                        if (!entityhuman1.canHarmPlayer(entityhuman)) {
+                            return false;
+                        }
+                    }
+                }
+
+                if (target instanceof AbstractHorse) {
+                    AbstractHorse entityhorseabstract = (AbstractHorse) target;
+
+                    if (entityhorseabstract.isTamed()) {
+                        return false;
+                    }
+                }
+
+                boolean flag;
+
+                if (target instanceof TamableAnimal) {
+                    TamableAnimal entitytameableanimal = (TamableAnimal) target;
+
+                    if (entitytameableanimal.isTame()) {
+                        flag = false;
+                        return flag;
+                    }
+                }
+
+                flag = true;
+                return flag;
+            }
+        } else {
+            return false;
         }
     }
 
@@ -621,24 +692,25 @@
 
     @Override
     public Vec3 getLeashOffset() {
-        return new Vec3(0.0, (double)(0.6F * this.getEyeHeight()), (double)(this.getBbWidth() * 0.4F));
+        return new Vec3(0.0D, (double) (0.6F * this.getEyeHeight()), (double) (this.getBbWidth() * 0.4F));
     }
 
     public static boolean checkWolfSpawnRules(EntityType<Wolf> type, LevelAccessor world, EntitySpawnReason spawnReason, BlockPos pos, RandomSource random) {
         return world.getBlockState(pos.below()).is(BlockTags.WOLVES_SPAWNABLE_ON) && isBrightEnoughToSpawn(world, pos);
     }
 
-    class WolfAvoidEntityGoal<T extends LivingEntity> extends AvoidEntityGoal<T> {
+    private class WolfAvoidEntityGoal<T extends LivingEntity> extends AvoidEntityGoal<T> {
+
         private final Wolf wolf;
 
-        public WolfAvoidEntityGoal(final Wolf wolf, final Class<T> fleeFromType, final float distance, final double slowSpeed, final double fastSpeed) {
-            super(wolf, fleeFromType, distance, slowSpeed, fastSpeed);
-            this.wolf = wolf;
+        public WolfAvoidEntityGoal(final Wolf entitywolf, final Class oclass, final float f, final double d0, final double d1) {
+            super(entitywolf, oclass, f, d0, d1);
+            this.wolf = entitywolf;
         }
 
         @Override
         public boolean canUse() {
-            return super.canUse() && this.toAvoid instanceof Llama && !this.wolf.isTame() && this.avoidLlama((Llama)this.toAvoid);
+            return super.canUse() && this.toAvoid instanceof Llama ? !this.wolf.isTame() && this.avoidLlama((Llama) this.toAvoid) : false;
         }
 
         private boolean avoidLlama(Llama llama) {
@@ -647,18 +719,19 @@
 
         @Override
         public void start() {
-            Wolf.this.setTarget(null);
+            Wolf.this.setTarget((LivingEntity) null);
             super.start();
         }
 
         @Override
         public void tick() {
-            Wolf.this.setTarget(null);
+            Wolf.this.setTarget((LivingEntity) null);
             super.tick();
         }
     }
 
     public static class WolfPackData extends AgeableMob.AgeableMobGroupData {
+
         public final Holder<WolfVariant> type;
 
         public WolfPackData(Holder<WolfVariant> variant) {
